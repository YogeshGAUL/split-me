<div class="upload-files-container">
  <div class="warn-box">
    <img src="../../../assets/warning.png" alt="warning.png" />
    <span
      >This is an experimental feature, please verify and update parsed
      values</span
    >
  </div>
  <div
    *ngIf="fileFlag"
    appDragDrop
    class="drag-file-area"
    (fileDropped)="fileUpdate($event)"
  >
    <img src="../../../assets/import.png" class="upload-icon" />
    <h3>Drag & drop any file here</h3>
    <label class="label">
      <span>or</span>
      <span class="browse-files">
        <input
          #fileInput
          type="file"
          (click)="fileInput.value = ''"
          (change)="onFileInput($event)"
          class="default-file-input"
        />

        <span class="browse-files-text">browse file </span>
        <span class="static-text">from device</span>
      </span>
    </label>
  </div>
  <div *ngIf="!fileFlag" class="after-upload mb-2">
    <div class="file-info">
      <img src="../../../assets/green-tick.png" alt="" />
      <span>{{ fileName }} | {{ fileSize }}</span>
    </div>
    <div class="reset-file-picker" (click)="fileFlag = true">
      choose another file
    </div>
  </div>
  <div
    *ngIf="!fileFlag"
    class="bill-display-container"
    [ngStyle]="{ opacity: uploadStart ? 0.3 : 1 }"
  >
    <div class="image-titles lead">
      <div class="img-title">Uploaded bill</div>
      <div class="img-title">Clipped region</div>
    </div>
    <div class="bill-display-image-holders">
      <image-cropper
        [imageFile]="file"
        [maintainAspectRatio]="false"
        format="png"
        (imageCropped)="cropImg($event)"
        (loadImageFailed)="imgFailed()"
      >
      </image-cropper>
      <div class="preview-wrapper">
        <img class="preview-img" [src]="cropImgPreview" />
      </div>
    </div>
  </div>
  <div class="bottom-panel">
    <button
      *ngIf="!uploadStart"
      [disabled]="fileFlag"
      (click)="upload()"
      type="button"
      class="upload-button"
    >
      Parse
    </button>
    <mat-spinner
      *ngIf="uploadStart"
      color="blue"
      mode="indeterminate"
      diameter="45"
      color
    ></mat-spinner>
  </div>
</div>
