<div class="upload-files-container">
  <div class="warn-box">
    <img src="../../../assets/warning.png" alt="warning.png" />
    <span
      >This is an experimental feature, please verify and update parsed
      values</span
    >
  </div>
  <div
    appDragDrop
    class="drag-file-area"
    (fileDropped)="fileUpdate($event)"
    [ngStyle]="{ opacity: uploadStart ? 0.5 : 1 }"
  >
    <img
      [src]="
        fileFlag
          ? '../../../assets/import.png'
          : '../../../assets/green-tick.png'
      "
      class="upload-icon"
    />
    <h3>{{ titleMessage }}</h3>
    <div *ngIf="!fileFlag" class="file-info">
      <img src="../../../assets/notes.svg" alt="" />
      <span>{{ fileName }} | {{ fileSize }}</span>
    </div>
    <label class="label">
      <span *ngIf="fileFlag">or</span>
      <span class="browse-files">
        <input
          #fileInput
          type="file"
          (click)="fileInput.value = ''"
          (change)="onFileInput($event)"
          class="default-file-input"
        />

        <span class="browse-files-text">browse file </span>
        <span>from device</span>
      </span>
    </label>
  </div>
  <div class="bill-display-container">
    <image-cropper
      [imageFile]="file"
      [maintainAspectRatio]="false"
      format="png"
      (imageCropped)="cropImg($event)"
      (imageLoaded)="imageLoaded($event)"
      (cropperReady)="cropperReady()"
      (loadImageFailed)="imgFailed()"
    >
    </image-cropper>
    <div class="preview-wrapper">
      <img class="preview-img" [src]="cropImgPreview" />
    </div>
  </div>

  <button
    *ngIf="!uploadStart"
    [disabled]="fileFlag"
    (click)="upload()"
    type="button"
    class="upload-button"
  >
    Parse
  </button>
  <mat-spinner
    *ngIf="uploadStart"
    color="blue"
    [value]="progress"
    mode="determinate"
    diameter="45"
    color
  ></mat-spinner>
</div>
